import{j as e,v as te,w as ce,L as se,x as je,y as me,z as ae,A as le,D as g,P as ve,G as Ye,F as qe,aE as He,r as s,aM as Je,V as we,C as Qe,Z as Xe,c as et,b as tt,J as st,u as at,K as lt,M as rt}from"./index.js";import{M as O}from"./MuiDialog.js";import{d as ot}from"./ExpandMore.js";import{d as ie}from"./Check.js";import{I as J}from"./listbox.js";import{E as nt}from"./index40.js";import{S as de}from"./SingleSelectDropdown.js";import{L as ke}from"./leaflet-src.js";import{i as dt,a as it,M as ct,T as mt,b as xt,P as ut}from"./marker-shadow.js";import{B as ye,L as ht,S as pt}from"./index3.js";import"./chartjs-adapter-moment.esm.js";import{V as W,a as I}from"./axios.js";import{M as ge}from"./Chip.js";import{D as bt}from"./Datepicker.js";import{R as gt}from"./index35.js";import{l as ft}from"./lodash.js";import{G as Q}from"./Grid.js";import{A as jt}from"./Avatar.js";import"./DialogTitle.js";import"./useTheme.js";import"./Backdrop.js";import"./Modal.js";import"./resolveComponentProps.js";import"./useSlotProps.js";import"./Paper.js";import"./createSvgIcon2.js";import"./createSvgIcon.js";import"./render.js";import"./open-closed.js";import"./moment.js";import"./popover.js";import"./floating-ui.dom.js";import"./tslib.es6.js";import"./dayjs.min.js";import"./index34.js";const vt=({SORT_BY:t,selectSortBy:r,setSelectSortBy:l})=>e.jsx(J,{value:r,onChange:l,className:"rounded",children:e.jsxs("div",{className:"relative z-20",children:[e.jsxs(J.Button,{className:"relative w-full py-2 pl-3 pr-10 text-left bg-white border border-gray-300 rounded-md shadow-sm cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:border-violet-500 sm:text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Sort By:"}),e.jsxs("span",{className:"truncate",children:[" ",t[r]]}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:e.jsx(ot,{})})]}),e.jsx(J.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-10",children:Object.keys(t).map((a,c)=>e.jsxs(J.Option,{className:({active:n})=>`relative cursor-pointer select-none py-2 pl-10 pr-4 ${n?"bg-violet-100 text-violet-800":"text-slate-900"}`,value:a,children:[e.jsx("span",{className:`block truncate ${r===a?"font-medium":"font-normal"}`,children:t[a]}),r===a?e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600",children:e.jsx(ie,{})}):null]},c))})]})}),wt=[{label:"Last hour",value:"last_hour"},{label:"Today",value:"today"},{label:"This week",value:"this_week"},{label:"This month",value:"this_month"},{label:"This year",value:"this_year"}],kt=({wordsWithCounts:t})=>{const r=Math.max(...t.map(a=>a.count)),l=[...t].sort((a,c)=>c.count-a.count);return e.jsx("div",{className:"flex flex-wrap gap-1",children:l.map(({word:a,count:c},n)=>{const m=Math.round(c/r*24+12);return e.jsx("span",{className:"inline-block font-bold",style:{fontSize:`${m}px`},children:a},n)})})};let yt=ke.icon({iconUrl:dt,shadowUrl:it,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});ke.Marker.prototype.options.icon=yt;const Nt=({videoLocations:t})=>e.jsxs(ct,{center:[0,0],zoom:2,style:{height:"400px"},children:[e.jsx(mt,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.map(r=>{const{latitude:l,longitude:a}=r.location;return l!==0||a!==0?e.jsx(xt,{position:[l,a],children:e.jsx(ut,{children:e.jsx("a",{href:`https://www.youtube.com/watch?v=${r.videoId}`,target:"_blank",rel:"noopener noreferrer",children:"view on YouTube"})})},r.videoId):null})]});te.register(ce,se,je,me,ae,le);const X=({graphData:t,xTitle:r})=>{var m;const l=(m=(t==null?void 0:t.labels)||[])==null?void 0:m.map(o=>o.length>10?`${o.slice(0,10)}...`:o),a=t==null?void 0:t.data,c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{title:o=>{var j;return(j=(t==null?void 0:t.labels)||[])==null?void 0:j[o[0].dataIndex]}}}},scales:{x:{grid:{display:!1},title:{display:!0,text:r},ticks:{color:g().theme.colors.gray[700],autoSkip:!1}},y:{grid:{display:!1},title:{display:!0,text:"Counts"},ticks:{beginAtZero:!0,color:g().theme.colors.gray[700]}}}},n={labels:l,datasets:[{barPercentage:.5,categoryPercentage:.5,label:"Keywords Count",data:a,backgroundColor:g().theme.colors.violet[500],hoverBackgroundColor:g().theme.colors.violet[600],borderRadius:4}]};return e.jsx("div",{className:"w-full mx-auto",style:{height:"300px"},children:e.jsx(ye,{options:c,data:n})})};te.register(ce,se,ve,Ye,me,ae,le);const St=({graphData:t})=>{qe();const r={labels:t.labels,datasets:[{label:"Post Count",data:t.data,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.2)",fill:!0,borderWidth:2,pointRadius:4,pointBackgroundColor:"#3b82f6",pointHoverRadius:6,tension:.3}]},l={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(a){return`Post Counts: ${a.raw}`}}}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Published Date"},ticks:{}},y:{grid:{display:!1},title:{display:!0,text:"Counts"},beginAtZero:!0}}};return e.jsx(e.Fragment,{children:e.jsx(ht,{data:r,options:l})})};te.register(se,ve,ae,le,He);const Mt=({data:t})=>{const r={datasets:[{label:"Views",data:t==null?void 0:t.map(a=>({x:a.date,y:a.views})),backgroundColor:g().theme.colors.blue[500],pointRadius:6},{label:"Likes",data:t==null?void 0:t.map(a=>({x:a.date,y:a.likes})),backgroundColor:g().theme.colors.green[500],pointRadius:6},{label:"Comments",data:t==null?void 0:t.map(a=>({x:a.date,y:a.comments})),backgroundColor:g().theme.colors.red[500],pointRadius:6}]},l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(a){return`${a.dataset.label}: ${a.parsed.y}`},title:function(a){return new Date(a[0].parsed.x).toLocaleDateString()}}}},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM D, YYYY",displayFormats:{day:"MMM D"}},title:{display:!0,text:"Date"},ticks:{color:g().theme.colors.gray[700]}},y:{title:{display:!0,text:"Count"},ticks:{color:g().theme.colors.gray[700]},beginAtZero:!0}}};return e.jsx("div",{className:"w-full mx-auto",style:{height:"400px"},children:e.jsx(pt,{options:l,data:r})})};te.register(ce,se,je,me,ae,le);const Ct=({videoData:t})=>{const r=t==null?void 0:t.map(o=>o.title.length>10?`${o.title.slice(0,10)}...`:o.title),l=t==null?void 0:t.map(o=>parseInt(o.views,10)),a=t==null?void 0:t.map(o=>parseInt(o.likes,10)),c=t==null?void 0:t.map(o=>parseInt(o.comments,10)),n={labels:r,datasets:[{label:"Views",data:l,backgroundColor:g().theme.colors.blue[500],hoverBackgroundColor:g().theme.colors.blue[600]},{label:"Likes",data:a,backgroundColor:g().theme.colors.green[500],hoverBackgroundColor:g().theme.colors.green[600]},{label:"Comments",data:c,backgroundColor:g().theme.colors.red[500],hoverBackgroundColor:g().theme.colors.red[600]}]},m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{title:o=>t[o[0].dataIndex].title}}},scales:{x:{grid:{display:!1},ticks:{color:g().theme.colors.gray[700],autoSkip:!1}},y:{grid:{display:!1},title:{display:!0,text:"Counts"},ticks:{beginAtZero:!0,color:g().theme.colors.gray[700]}}}};return e.jsx("div",{className:"w-full mx-auto",style:{height:"400px"},children:e.jsx(ye,{options:m,data:n})})};function zt(t){return t.split("/").pop().split("_").pop()}const Vt=({analytics:t,projectId:r})=>{var C,x,b,E,R,B,D,F;const l=new Date,[a,c]=s.useState(`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`),[n,m]=s.useState(`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`),[o,j]=s.useState({labels:[],data:[]}),[v,T]=s.useState([]),N={labels:(C=t==null?void 0:t.channelContributions)==null?void 0:C.map(d=>d.channelTitle),data:(x=t==null?void 0:t.channelContributions)==null?void 0:x.map(d=>d.videoCount)},V={labels:(b=t==null?void 0:t.keywordCounts)==null?void 0:b.map(d=>d.word),data:(E=t==null?void 0:t.keywordCounts)==null?void 0:E.map(d=>d.count)},S={labels:(R=t==null?void 0:t.topicBreakdown)==null?void 0:R.map(d=>zt(d.topic)),data:(B=t==null?void 0:t.topicBreakdown)==null?void 0:B.map(d=>d.count)},k={labels:(D=t==null?void 0:t.videoLengthAnalysis)==null?void 0:D.map(d=>d.label),data:(F=t==null?void 0:t.videoLengthAnalysis)==null?void 0:F.map(d=>d.count)},M=async()=>{const[d,$]=a.split("-").map(Number);try{const f=await W.get(`${I.projects}/videos/analytics/${r}/trends?year=${d}&month=${$}`);if(f.status===200){const w=f.data.data;j({labels:w==null?void 0:w.map(z=>z.date),data:w==null?void 0:w.map(z=>z.count)}),console.log("trends",f)}}catch(f){console.error(f)}};s.useEffect(()=>{M()},[a]);const y=async()=>{const[d,$]=n.split("-").map(Number);try{const f=await W.get(`${I.projects}/videos/analytics/${r}/engagement?year=${d}&month=${$}`);if(f.status===200){const w=f.data.data;T(w)}}catch(f){console.error(f)}};return s.useEffect(()=>{y()},[n]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Video Counts by Keywords "})}),e.jsx(X,{graphData:V,xTitle:"Keywords"})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl",children:[e.jsxs("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:[e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Video trends over time"}),e.jsx("input",{className:"form-input",type:"month",value:a,onChange:d=>{c(d.target.value)}})]}),e.jsx(St,{graphData:o})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Topic Breakdown"})}),e.jsx(X,{graphData:S,xTitle:"Topics"})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl",children:[e.jsxs("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:[e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Engagement Distribution"}),e.jsx("input",{className:"form-input",type:"month",value:n,onChange:d=>{m(d.target.value)}})]}),e.jsx(Mt,{data:v})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Channel Contributions"})}),e.jsx(X,{graphData:N,xTitle:"Channels"})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl text-center",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Top Performing Videos"})}),e.jsx(Ct,{videoData:t==null?void 0:t.topPerformingVideos})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl text-center",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 text-center",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Video Length Analysis"})}),e.jsx(X,{graphData:k})]})]})},fe=({options:t=[],onSelectionChange:r})=>{const[l,a]=s.useState(["All"]),c=n=>{let m;n==="All"?m=l.includes("All")?[]:["All"]:m=l.includes(n)?l.filter(o=>o!==n):[...l.filter(o=>o!=="All"),n],a(m),r(m)};return e.jsxs(Je,{direction:"row",flexWrap:"wrap",mt:1,gap:1,children:[e.jsx(ge,{label:"All",clickable:!0,onClick:()=>c("All"),icon:l.includes("All")?e.jsx(ie,{sx:{fontSize:20,margin:0,color:"#5B21B6"}}):null,sx:{backgroundColor:l.includes("All")?"#EFE0FF":"white",color:l.includes("All")?"#5B21B6":"grey",border:"1px solid #D0D5DD",fontWeight:l.includes("All")?"bold":"normal",paddingLeft:l.includes("All")?"6px":"12px"}}),t==null?void 0:t.map(n=>e.jsx(ge,{label:n,clickable:!0,onClick:()=>c(n),icon:l.includes(n)?e.jsx(ie,{sx:{fontSize:20,margin:0,color:"#5B21B6"}}):null,sx:{backgroundColor:l.includes(n)?"#EFE0FF":"white",color:l.includes(n)?"#5B21B6":"grey",border:"1px solid #D0D5DD",fontWeight:l.includes(n)?"bold":"normal",paddingLeft:l.includes(n)?"6px":"12px"}},n))]})},_t=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15}],Pt=({projectId:t,project:r,selectedKeywords:l,setSelectedKeywords:a,selectedTopics:c,setSelectedTopics:n,analytics:m,videoLocations:o,wordsWithCounts:j,channelsList:v,dataFetchLoading:T,filterByUploadDate:N,setFilterByUploadDate:V,pageSize:S,setPageSize:k,to:M,setTo:y,from:C,setFrom:x,setChannelId:b,channelId:E})=>{const[R,B]=s.useState(!1),[D,F]=s.useState(!1),[d,$]=s.useState(!1),[f,w]=s.useState([]),[z,re]=s.useState([]);s.useEffect(()=>{var u,A;r&&(w((u=r.topics)==null?void 0:u.map(U=>U.name)),re((A=r.orKeywords)==null?void 0:A.map(U=>U)))},[r]);const K=()=>{x(""),y(""),V(""),k(10),b("")};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"flex flex-col mt-0 h-full overflow-hidden",children:[e.jsx("header",{className:"sticky top-0 z-20",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{disabled:T,className:"mb-2 text-xs btn bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700/60 hover:border-gray-300 dark:hover:border-gray-600 text-gray-800 dark:text-gray-300",onClick:()=>{K()},children:"Clear Filters"})})}),e.jsxs("div",{className:"overflow-x-hidden flex-grow hoverscroll",children:[e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_dateRange",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Date Range"}),e.jsx("div",{className:"",children:e.jsx(bt,{initialDate:{from:C,to:M},setFrom:x,setTo:y})})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_topics",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Topics"}),e.jsx(fe,{options:f,onSelectionChange:u=>{n(u)}})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_keywords",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Keywords"}),e.jsx(fe,{options:z,onSelectionChange:u=>{a(u)}})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_uploadDate",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Filter by upload date"}),e.jsx(de,{options:wt,label:"Select Upload Date",selectedValue:N,onSelect:u=>{V(u)}})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_channel",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Filter by channel"}),e.jsx(de,{options:v,label:"Select channel",selectedValue:E,onSelect:u=>{b(u)}})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_displayGraph",className:"grid items-center",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Graphs"}),(o==null?void 0:o.length)>0?e.jsx("button",{className:"btn bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white",onClick:u=>{u.stopPropagation(),$(!0)},children:"Display Graphs"}):e.jsx("p",{className:"text-red-600",children:"Please Filter the posts first"})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_displayMostRepeatedWords",className:"grid items-center",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Most Repeated Words"}),(j==null?void 0:j.length)>0?e.jsx("button",{className:"btn bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white",onClick:u=>{u.stopPropagation(),B(!0)},children:"Display Keywords"}):e.jsx("p",{className:"text-red-600",children:"Please Filter the posts first"})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_displayOnMap",className:"grid items-center",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Videos locations"}),(o==null?void 0:o.length)>0?e.jsx("button",{className:"btn bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white",onClick:u=>{u.stopPropagation(),F(!0)},children:"Display Map"}):e.jsx("p",{className:"text-red-600",children:"Please Filter the posts first"})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_itemsPerPage",children:[e.jsx("label",{className:"block font-bold text-sm mt-3 text-slate-500",children:"Items per Page"}),e.jsx(de,{options:_t,selectedValue:S,onSelect:u=>{k(u)}})]})]})]}),e.jsx(O,{id:"AnalyticsModal-1234",title:"Graphs",open:d,setOpen:()=>{$(!1)},fullWidth:!0,maxWidth:"md",paperOverflow:!0,children:e.jsx(Vt,{analytics:m,projectId:t})}),e.jsx(O,{id:"WordsCountModal-1234",title:"Words with counts",open:R,setOpen:()=>{B(!1)},fullWidth:!0,maxWidth:"md",paperOverflow:!0,children:e.jsx(kt,{wordsWithCounts:j})}),e.jsx(O,{id:"MapModal-1234",title:"Locations",open:D,setOpen:()=>{F(!1)},fullWidth:!0,maxWidth:"md",children:e.jsx(Nt,{videoLocations:o})})]})};function ee({projectId:t,most:r}){const[l,a]=s.useState(!1),[c,n]=s.useState(1),[m,o]=s.useState(5),[j,v]=s.useState(),[T,N]=s.useState(0),[V,S]=s.useState([]),[k,M]=s.useState(""),[y,C]=s.useState(k);return s.useEffect(()=>{const x=ft.debounce(b=>{C(b),n(1)},500);return x(k),()=>x.cancel()},[k]),s.useEffect(()=>{(async()=>{try{a(!0);const b=await W.get(`${I.projects}/videos/stats/${t}?most=${r}&page=${c}&pageSize=${m}&searchValue=${y}`);b.data.success&&(N(b.data.pagination.total),v(b.data.pagination.totalPages),S(b.data.stats))}catch(b){console.error("Error fetching data:",b)}finally{a(!1)}})()},[c,m,y]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xs rounded-xl relative",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{id:"meilisearch",name:"meilisearch",value:k,onChange:x=>M(x.target.value),className:"form-input w-full pl-9 bg-white dark:bg-slate-800",type:"search",placeholder:"Search…"}),e.jsx("button",{className:"absolute inset-0 right-auto group",type:"submit","aria-label":"Search",children:e.jsxs("svg",{className:"w-4 h-4 shrink-0 fill-current text-slate-400 dark:text-slate-500 group-hover:text-slate-500 dark:group-hover:text-slate-400 ml-3 mr-2",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7 14c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zM7 2C4.243 2 2 4.243 2 7s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"}),e.jsx("path",{d:"M15.707 14.293L13.314 11.9a8.019 8.019 0 01-1.414 1.414l2.393 2.393a.997.997 0 001.414 0 .999.999 0 000-1.414z"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full dark:text-gray-300",children:[e.jsx("thead",{className:"text-xs font-semibold uppercase text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-900/20 border-t border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:"Counts"})}),e.jsx("th",{className:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:"Thumbnail"})}),e.jsx("th",{className:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:"Title"})})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-slate-200 dark:divide-slate-700",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",style:{textAlign:"center",padding:"22px"},children:e.jsx(Qe,{})})}):V.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",children:e.jsx("div",{className:"relative mr-3 mb-2",children:x.count})}),e.jsx("td",{className:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",children:e.jsx("div",{className:"relative mr-3 mb-2",children:e.jsx("img",{className:"w-7 h-7 object-cover rounded-md",src:x.thumbnailUrl,alt:x.title})})}),e.jsx("td",{className:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",children:e.jsx(we,{className:"text-xs inline-flex font-medium bg-violet-100 dark:bg-violet-500/30 text-violet-600 dark:text-violet-400 rounded-full text-center px-2.5 py-1",to:`https://www.youtube.com/watch?v=${x.videoId}`,target:"_blank",children:x.title})})]},x.videoId))})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(gt,{current:c,total:j,onPageChange:n})})]})}const Bt={none:"",views:"Most Views",likes:"Most Likes",comments:"Most Comments",favorites:"Most Favorites"},hs=()=>{var be;const{projectId:t}=Xe();et(),tt(),st();const r=at(),l=r==null?void 0:r.userPermissions,a="module_videoBuzz",c="submodule_videoBuzz_projects",n=s.useMemo(()=>lt(l,a,c),[l]),[m,o]=s.useState(!1),{selectedProject:j}=rt(i=>i.videoBuzz.videoBuzzProjects),[v,T]=s.useState(j),[N,V]=s.useState(""),[S,k]=s.useState(""),[M,y]=s.useState(!1),[C,x]=s.useState(1),[b,E]=s.useState(10),[R,B]=s.useState(),[D,F]=s.useState(0),[d,$]=s.useState(!1),[f,w]=s.useState([]),[z,re]=s.useState(""),[K,u]=s.useState(""),[A,U]=s.useState(),[G,Ne]=s.useState();console.log("from",A,G);const[_,Se]=s.useState([]),[Me,Ce]=s.useState([]),[ze,Ve]=s.useState([]),[_e,Pe]=s.useState([]),[Be,Fe]=s.useState([]),[$e,Ae]=s.useState([]),[Le,Oe]=s.useState([]),[Te,Ee]=s.useState([]),[oe,We]=s.useState([]),[ne,Ie]=s.useState([]),[Re,xe]=s.useState(!1),[De,ue]=s.useState(!1),[Ke,he]=s.useState(!1),[Ue,pe]=s.useState(!1),[Z,Y]=s.useState(null);s.useEffect(()=>{requestAnimationFrame(()=>{document.querySelectorAll("[data-name]").forEach(h=>{const p=h.getAttribute("data-name"),P=n.find(H=>H.id===p);P&&(P.enable||h.remove())})}),o(!1)},[n,m]),s.useEffect(()=>{(async()=>{var h;const L=S.replace("Most ","");try{y(!0);const p=await W.post(`${I.projects}/videos/${t}?page=${C}&pageSize=${b}&searchValue=${N}&sortBy=${L}&byUpload=${z}&from=${A}&to=${G}&channelId=${K}`,{selectedTopics:oe,selectedKeywords:ne}),P=await W.get(`${I.projects}/${t}`),H=await W.get(`${I.projects}/videos/analytics/${t}`);H.data.success&&Ee(H.data.analytics),P.data.success&&T(P.data.data),p.data.success&&(F(p.data.pagination.total),B(p.data.pagination.totalPages),Se([...(h=p.data.data)==null?void 0:h.map(Ze=>Ze)]),w(p.data.channelsList),Ce(p.data.mostViewed),Ve(p.data.mostLiked),Pe(p.data.mostCommented),Fe(p.data.mostFavorited),Ae(p.data.keywordWithCounts),Oe(p.data.videoLocations))}catch(p){console.error("Error fetching videos:",p)}finally{y(!1)}})()},[C,z,A,G,b,S,N,K,oe,ne]);const Ge=()=>{x(i=>i+1)},q=(i,L)=>e.jsx("ul",{className:"space-y-3",children:i==null?void 0:i.map((h,p)=>{var P;return e.jsx("li",{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative mr-3",children:e.jsx("img",{className:"w-7 h-7 object-cover rounded-full",src:h.thumbnailUrl,alt:h.title})}),e.jsxs("div",{className:"truncate w-30",children:[e.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",title:h.title,children:h.title.length>20?h.title.substring(0,20)+"...":h.title}),e.jsx("div",{className:"flex items-center text-xs font-medium text-slate-500 dark:text-slate-400",children:e.jsxs("span",{children:[(P=h==null?void 0:h.count)==null?void 0:P.toLocaleString()," ",L]})})]})]}),e.jsx(we,{className:"text-xs inline-flex font-medium bg-violet-100 dark:bg-violet-500/30 text-violet-600 dark:text-violet-400 rounded-full text-center px-2.5 py-1",to:`https://www.youtube.com/watch?v=${h.videoId}`,target:"_blank",children:"Watch"})]})},p)})});return e.jsxs("div",{className:"flex h-[100dvh] overflow-hidden px-5",children:[e.jsx("div",{className:"relative flex flex-col flex-1 overflow-y-hidden overflow-x-hidden",children:e.jsx("div",{className:"p-space-y-2",children:e.jsxs(Q,{container:!0,spacing:{xs:2,md:2},columns:{xs:4,sm:8,md:12},children:[e.jsx(Q,{item:!0,xs:2,sm:4,md:3,children:e.jsx("div",{className:"md:sticky md:top-16 md:h-[calc(100dvh-64px)] md:overflow-x-hidden md:overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"md:py-8",children:[e.jsx("header",{className:"mb-6",children:e.jsx("h1",{className:"text-2xl md:text-3xl text-slate-800 dark:text-slate-100 font-bold",children:`${v==null?void 0:v.name}✨`})}),e.jsx(Pt,{projectId:t,project:v,selectedKeywords:ne,setSelectedKeywords:Ie,selectedTopics:oe,setSelectedTopics:We,analytics:Te,videoLocations:Le,wordsWithCounts:$e,channelsList:f,channelId:K,setChannelId:u,to:G,setTo:Ne,from:A,setFrom:U,filterByUploadDate:z,setFilterByUploadDate:re,pageSize:b,setPageSize:E})]})})}),e.jsx(Q,{item:!0,xs:2,sm:4,md:6,children:e.jsx("div",{className:"md:sticky md:top-16 md:h-[calc(100dvh-64px)] md:overflow-x-hidden md:overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"md:py-8",children:[e.jsx("div",{"data-name":"feature_videoBuzz_projectView_sortFilters",children:e.jsx(vt,{SORT_BY:Bt,selectSortBy:S,setSelectSortBy:k})}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 italic mb-4",children:[_.length," Items"]}),e.jsx("div",{className:"bg-white shadow-lg rounded-xl border border-slate-200 p-2 mx-auto mb-6",children:_.map(i=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(jt,{src:i.channelProfile.thumbnails.default.url}),e.jsxs("div",{className:"ml-2",children:[e.jsx("h3",{className:"font-bold text-slate-900",children:i.channelProfile.title}),e.jsx("p",{className:"text-sm text-slate-500",children:i.title})]})]}),e.jsx(nt,{upload:i})]}))}),e.jsxs("div",{className:"flex justify-center mt-3",children:[!d&&(_==null?void 0:_.length)>0&&e.jsx("button",{className:"btn bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white",disabled:M,onClick:i=>{i.stopPropagation(),Ge()},children:M?"loading...":"Show More"}),(_==null?void 0:_.length)===0&&!M&&e.jsx("div",{className:"text-center text-slate-500 italic",children:"No Videos"})]})]})})}),e.jsx(Q,{item:!0,xs:2,sm:4,md:3,children:e.jsx("div",{className:"md:sticky md:top-16 md:h-[calc(100dvh-64px)] md:overflow-x-hidden md:overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"md:py-8",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{id:"",name:"",value:N,onChange:i=>{V(i.target.value)},className:"form-input w-full pl-9 bg-white dark:bg-slate-800",type:"search",placeholder:"Search…"}),e.jsx("button",{className:"absolute inset-0 right-auto group",type:"submit","aria-label":"Search",children:e.jsxs("svg",{className:"w-4 h-4 shrink-0 fill-current text-slate-400 dark:text-slate-500 group-hover:text-slate-500 dark:group-hover:text-slate-400 ml-3 mr-2",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7 14c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zM7 2C4.243 2 2 4.243 2 7s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"}),e.jsx("path",{d:"M15.707 14.293L13.314 11.9a8.019 8.019 0 01-1.414 1.414l2.393 2.393a.997.997 0 001.414 0 .999.999 0 000-1.414z"})]})})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/20 p-4 rounded border border-slate-200 dark:border-slate-700 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 dark:text-slate-700 uppercase mb-4",children:"Topics and SubTopics"}),e.jsx("div",{className:"space-y-4",children:(be=v==null?void 0:v.topics)==null?void 0:be.map(i=>{var L,h;return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-500",children:i==null?void 0:i.name}),e.jsxs("h4",{className:"text-xs text-slate-500",children:[" ",(h=(L=i==null?void 0:i.subtopics)==null?void 0:L.split(","))==null?void 0:h.map(p=>p.trim()).join(" • ")]})]})})})})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_mostViews",className:"bg-slate-50 dark:bg-slate-800/20 p-4 rounded border border-slate-200 dark:border-slate-700 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 dark:text-slate-700 uppercase mb-4",children:"Most Views"}),q(Me,"views"),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{Y("views"),xe(!0)},className:"btn-sm w-full bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 text-violet-500 shadow-none",children:"View All"})})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_mostLike",className:"bg-slate-50 dark:bg-slate-800/20 p-4 rounded border border-slate-200 dark:border-slate-700 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 dark:text-slate-700 uppercase mb-4",children:"Most Likes"}),q(ze,"likes"),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{Y("likes"),ue(!0)},className:"btn-sm w-full bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 text-violet-500 shadow-none",children:"View All"})})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_comments",className:"bg-slate-50 dark:bg-slate-800/20 p-4 rounded border border-slate-200 dark:border-slate-700 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 dark:text-slate-700 uppercase mb-4",children:"Most Comments"}),q(_e,"comments"),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{Y("comments"),he(!0)},className:"btn-sm w-full bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 text-violet-500 shadow-none",children:"View All"})})]}),e.jsxs("div",{"data-name":"feature_videoBuzz_projectView_favorites",className:"bg-slate-50 dark:bg-slate-800/20 p-4 rounded border border-slate-200 dark:border-slate-700 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 dark:text-slate-700 uppercase mb-4",children:"Most Favorites"}),q(Be,"favorites"),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{Y("favorites"),pe(!0)},className:"btn-sm w-full bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 text-violet-500 shadow-none",children:"View All"})})]})]})})})]})})}),e.jsx(O,{id:"MostViewsModal-1234",title:"Most Views",open:Re,setOpen:()=>{xe(!1)},fullWidth:!0,maxWidth:"md",children:e.jsx(ee,{projectId:t,most:Z})}),e.jsx(O,{id:"MostLikesModal-1234",title:"Most Likes",open:De,setOpen:()=>{ue(!1)},fullWidth:!0,maxWidth:"md",children:e.jsx(ee,{projectId:t,most:Z})}),e.jsx(O,{id:"MostCommentsModal-1234",title:"Most Comments",open:Ke,setOpen:()=>{he(!1)},fullWidth:!0,maxWidth:"md",children:e.jsx(ee,{projectId:t,most:Z})}),e.jsx(O,{id:"MostFavoritesModal-1234",title:"Most Favorites",open:Ue,setOpen:()=>{pe(!1)},fullWidth:!0,maxWidth:"md",children:e.jsx(ee,{projectId:t,most:Z})})]})};export{hs as default};
