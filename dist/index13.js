import{v,w as C,L as _,x as N,y as w,z as j,A as k,D as m,j as e,E as T,r as g,F as B,I,P as E,G as z,aL as P,H as R,J as V,u as H,K as Z,M as A}from"./index.js";import{C as L}from"./CardWithAnalytics.js";import{B as F,P as $,L as U}from"./index3.js";import"./chartjs-adapter-moment.esm.js";import{S as M}from"./SingleSelectDropdown.js";import{V as O,a as D}from"./axios.js";import"./moment.js";v.register(C,_,N,w,j,k);const K=({trendingTopics:a})=>{const t=a==null?void 0:a.map(s=>s.topic),r=a==null?void 0:a.map(s=>s.count),o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{title:s=>a[s[0].dataIndex]._id}}},scales:{x:{grid:{display:!1},ticks:{color:m().theme.colors.gray[700],autoSkip:!1}},y:{grid:{display:!1},title:{display:!0,text:"Counts"},ticks:{beginAtZero:!0,color:m().theme.colors.gray[700]}}}},d={labels:t,datasets:[{barPercentage:.5,categoryPercentage:.5,label:"Count",data:r,backgroundColor:m().theme.colors.violet[500],hoverBackgroundColor:m().theme.colors.violet[600],borderRadius:4}]};return e.jsx("div",{className:"w-full mx-auto",style:{height:"300px"},children:e.jsx(F,{options:o,data:d})})};function W({trendingTopics:a}){return e.jsxs("div",{"data-name":"feature_videoBuzz_main_trending_topics_chart",className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl min-h-[400px]",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Trending Topics"})}),e.jsx(K,{trendingTopics:a})]})}v.register(C,_,N,w,j,k);function G({data:a,columns:t}){return e.jsx("div",{children:e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full dark:text-gray-300",children:[e.jsx("thead",{className:"text-xs uppercase text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-gray-700 dark:bg-opacity-50 rounded-sm",children:e.jsx("tr",{children:t==null?void 0:t.map((r,o)=>e.jsx("th",{className:"p-2 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:r})},o))})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700/60",children:a==null?void 0:a.map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 whitespace-nowrap",children:r==null?void 0:r.hashtag}),e.jsx("td",{className:"p-2 whitespace-nowrap",children:r==null?void 0:r.count})]},o))})]})})})})}function q({trendingHashtags:a}){const t=["Hash Tag","Count"];return e.jsxs("div",{"data-name":"feature_videoBuzz_main_trending_hashtag_chart",className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl min-h-[400px]",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Trending Hashtags"})}),e.jsx(G,{columns:t,data:a})]})}v.register(C,_,N,w,j,k);const J=({topVideos:a})=>{const t=a==null?void 0:a.map(s=>s.videoId),r=a==null?void 0:a.map(s=>s.views),o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{callbacks:{title:s=>a[s[0].dataIndex].title}}},scales:{x:{grid:{display:!1},ticks:{color:m().theme.colors.gray[700],autoSkip:!1,callback:function(s,c){return t[c]}}},y:{grid:{display:!1},title:{display:!0,text:"Views"},ticks:{beginAtZero:!0,color:m().theme.colors.gray[700]}}},onClick:(s,c)=>{if(c.length>0){const u=c[0].index,i=allInfluencers[u];i&&i.username&&window.open(`https://x.com/${i.username}`,"_blank")}}},d={labels:t,datasets:[{barPercentage:.5,categoryPercentage:.5,label:"Views",data:r,backgroundColor:m().theme.colors.violet[500],hoverBackgroundColor:m().theme.colors.violet[600],borderRadius:4}]};return e.jsx("div",{className:"w-full mx-auto",style:{height:"300px"},children:e.jsx(F,{options:o,data:d})})};function Q({topVideos:a}){return e.jsxs("div",{"data-name":"feature_videoBuzz_main_trending_video_chart",className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl min-h-[400px]",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Trending Videos"})}),e.jsx(J,{topVideos:a})]})}function X({data:a,columns:t}){return e.jsx("div",{children:e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full dark:text-gray-300",children:[e.jsx("thead",{className:"text-xs uppercase text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-gray-700 dark:bg-opacity-50 rounded-sm",children:e.jsx("tr",{children:t==null?void 0:t.map((r,o)=>e.jsx("th",{className:"p-2 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:r})},o))})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700/60",children:a==null?void 0:a.map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 whitespace-nowrap",children:r==null?void 0:r.channelTitle}),e.jsx("td",{className:"p-2 whitespace-nowrap",children:r==null?void 0:r.videoCount})]},o))})]})})})})}function Y({topChannels:a}){const t=["Channel","Videos Count"];return e.jsxs("div",{"data-name":"feature_videoBuzz_main_top_channels_chart",className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl min-h-[400px]",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Top Channels"})}),e.jsx(X,{columns:t,data:a})]})}v.register(T,j,k);const ee=({selectedData:a})=>{console.log("sentimentBreakdownsentimentBreakdown",a==null?void 0:a.sentimentData);const t=["Positive","Negative","Neutral"],r=g.useMemo(()=>{const n=a==null?void 0:a.sentimentData;if(!n)return[0,0,0];const{positive:p=0,negative:x=0,neutral:y=0}=n,h=p+x+y;return h===0?[0,0,0]:[(p/h*100).toFixed(2),(x/h*100).toFixed(2),(y/h*100).toFixed(2)]},[a]),{currentTheme:o}=B(),d=o==="dark",{tooltipTitleColor:s,tooltipBodyColor:c,tooltipBgColor:u,tooltipBorderColor:i}=I,l=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"],b={labels:t,datasets:[{label:"Sentiment Percentage",data:r,backgroundColor:l,hoverBackgroundColor:l.map(n=>`${n}B3`),borderWidth:0}]},f={responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{titleColor:d?s.dark:s.light,bodyColor:d?c.dark:c.light,backgroundColor:d?u.dark:u.light,borderColor:d?i.dark:i.light,callbacks:{label:function(n){const p=n.label||"",x=n.raw||0;return`${p}: ${x}%`}}},interaction:{intersect:!1,mode:"nearest"},animation:{duration:200},maintainAspectRatio:!1},cutout:"0%"};return e.jsx("div",{style:{height:"300px",width:"300px",margin:"0 auto"},children:e.jsx($,{data:b,options:f})})};function ae({sentimentBreakdown:a}){const[t,r]=g.useState(""),o=g.useMemo(()=>a==null?void 0:a.map(s=>({label:s.word,value:s.word})),[a]);g.useEffect(()=>{(o==null?void 0:o.length)>0&&r(o[0])},[o]);const d=g.useMemo(()=>a==null?void 0:a.find(s=>s.word===t.value),[t]);return e.jsxs("div",{"data-name":"feature_videoBuzz_main_sentiment_breakdown_chart",className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl min-h-[400px]",children:[e.jsxs("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60",children:[e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Sentiment Breakdown"}),e.jsx(M,{options:o,labelNValue:!0,selectedValue:t.value,onSelect:s=>r(s),label:"Select a topic",clearable:!1})]}),e.jsx(ee,{selectedData:d})]})}v.register(C,_,E,z,w,j,k);const se=({engagementMetrics:a})=>{B();const t=[...new Set(a==null?void 0:a.flatMap(s=>{var c;return(c=s.data)==null?void 0:c.map(u=>u.date)}))].sort(),r=a==null?void 0:a.map((s,c)=>{const u=m().theme.colors,i=["white","gray","slate","red","yellow","orange","pink","black","current","neutral","transparent","stone","zinc","inherit"],l=Object.keys(u).filter(p=>!i.includes(p)),b=500,f=l[c%l.length],n=t==null?void 0:t.map(p=>{var y;const x=(y=s.data)==null?void 0:y.find(h=>h.date===p);return x?x.views:0});return{label:s.topic,data:n,borderColor:u[f][b],fill:!1,borderWidth:2,pointRadius:0,pointHoverRadius:3,pointBackgroundColor:u[f][b],pointHoverBackgroundColor:u[f][b],pointBorderWidth:0,pointHoverBorderWidth:0,clip:20,tension:.2}}),o={labels:t,datasets:r},d={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(s){return`${s.dataset.label}: ${s.raw} views`}}}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Date"},ticks:{maxRotation:45,minRotation:45}},y:{grid:{display:!1},title:{display:!0,text:"Views"},beginAtZero:!0}}};return e.jsx(e.Fragment,{children:e.jsx(U,{data:o,options:d})})};function te({engagementMetrics:a}){return e.jsxs("div",{"data-name":"feature_videoBuzz_main_engagementMatrics_chart",className:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl min-h-[400px]",children:[e.jsx("header",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700/60",children:e.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Engagement Metrics"})}),a&&e.jsx(se,{engagementMetrics:a})]})}v.register(P,E,z,R,j,k);function ue(){const a=V(),t=H(),r=t==null?void 0:t.userPermissions,o="module_videoBuzz",d="submodule_videoBuzz_main",s=g.useMemo(()=>Z(r,o,d),[r]),[c,u]=g.useState(!1);g.useEffect(()=>{requestAnimationFrame(()=>{document.querySelectorAll("[data-name]").forEach(x=>{const y=x.getAttribute("data-name"),h=s.find(S=>S.id===y);h&&(h.enable||x.remove())})})},[s,c]);const{cardNumbers:i,graphAnalytics:l}=A(n=>n.videoBuzz.videoBuzzdashboard),b=async()=>{a({type:"FETCH_VIDEO_BUZZ_MAIN_START"});try{const n=await O.get(`${D.dashboard}`);n.status===200&&a({type:"FETCH_VIDEO_BUZZ_MAIN_SUCCESS",payload:{cardNumbers:n.data.numbers,graphAnalytics:n.data.graphAnalytics}})}catch(n){console.error(n),a({type:"FETCH_VIDEO_BUZZ_MAIN_FAILURE",payload:n.message})}};g.useEffect(()=>{b()},[]);const f=[{title:"Total Videos",value:(i==null?void 0:i.totalVideos)??0},{title:"Total Channels",value:(i==null?void 0:i.totalChannels)??0},{title:"Keywords",value:(i==null?void 0:i.totalKeywords)??0},{title:"Projects",value:(i==null?void 0:i.totalProjects)??0}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-5 p-2",children:[f.map((n,p)=>e.jsx("div",{"data-name":"feature_videoBuzz_main_number_analytics",className:"col-span-12 sm:col-span-6 lg:col-span-3",children:e.jsx(L,{title:n.title,subTitle:n.subTitle,value:n.value,percentage:n.percentage},p)},p)),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(W,{trendingTopics:l==null?void 0:l.trendingTopics})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(ae,{sentimentBreakdown:l==null?void 0:l.sentimentBreakdown})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(te,{engagementMetrics:l==null?void 0:l.dailyEngagementMetricsByTopic})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(q,{trendingHashtags:l==null?void 0:l.trendingHashtags})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(Q,{topVideos:l==null?void 0:l.topVideos})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(Y,{topChannels:l==null?void 0:l.topChannelsByVideoCount})})]})})}export{ue as default};
