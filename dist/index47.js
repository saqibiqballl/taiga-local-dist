import{r as l,u as f,j as a,aB as m,d as x}from"./index.js";import{S as v}from"./secureFetch.js";function k(e){var u,o;const[r,s]=l.useState(!1),d=l.useRef(null),i=l.useRef(null),c=f();l.useEffect(()=>{(async()=>{const n=await v.post(`${x}/api/fetch/getfetchsettings`);e==null||e.setOptions([...n.selectData]),n.length>0&&(e==null||e.setSelected(0))})()},[(u=c==null?void 0:c.user)==null?void 0:u._id]),l.useEffect(()=>{const t=({target:n})=>{i.current&&(!r||i.current.contains(n)||d.current.contains(n)||s(!1))};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)}),l.useEffect(()=>{const t=({keyCode:n})=>{!r||n!==27||s(!1)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)});const h=t=>t.length<20?t:`${t.substring(0,20-3)}...`;return a.jsxs("div",{className:"relative inline-flex",children:[a.jsxs("button",{ref:d,className:"btn justify-between min-w-44 bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 text-slate-500 hover:text-slate-600 dark:text-slate-300 dark:hover:text-slate-200","aria-label":"Select date range","aria-haspopup":"true",onClick:()=>s(!r),"aria-expanded":r,children:[a.jsx("span",{className:"flex items-center",children:a.jsx("span",{children:(o=e==null?void 0:e.options[e==null?void 0:e.selected])==null?void 0:o.name})}),a.jsx("svg",{className:"shrink-0 ml-1 fill-current text-slate-400",width:"11",height:"7",viewBox:"0 0 11 7",children:a.jsx("path",{d:"M5.4 6.8L0 1.4 1.4 0l4 4 4-4 1.4 1.4z"})})]}),a.jsx(m,{show:r,tag:"div",className:"z-10 absolute top-full left-0 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 py-1.5 rounded shadow-lg overflow-hidden mt-1",enter:"transition ease-out duration-100 transform",enterStart:"opacity-0 -translate-y-2",enterEnd:"opacity-100 translate-y-0",leave:"transition ease-out duration-100",leaveStart:"opacity-100",leaveEnd:"opacity-0",children:a.jsx("div",{ref:i,className:"font-medium text-sm text-slate-600 dark:text-slate-300 min-w-44",onFocus:()=>s(!0),onBlur:()=>s(!1),children:e==null?void 0:e.options.map((t,n)=>a.jsxs("button",{tabIndex:"0",className:`flex items-center w-full hover:bg-slate-50 hover:dark:bg-slate-700/20 py-1 px-3 cursor-pointer ${n===(e==null?void 0:e.selected)&&"text-violet-500"}`,onClick:()=>{e==null||e.setSelected(n),s(!1)},children:[a.jsx("svg",{className:`shrink-0 mr-2 fill-current text-violet-500 ${n!==(e==null?void 0:e.selected)&&"invisible"}`,width:"12",height:"9",viewBox:"0 0 12 9",children:a.jsx("path",{d:"M10.28.28L3.989 6.575 1.695 4.28A1 1 0 00.28 5.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28.28z"})}),a.jsx("span",{children:h(t==null?void 0:t.name)})]},n))})})]})}export{k as F};
