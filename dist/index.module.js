import{r as t}from"./index.js";function O(i,r,c){var x=this,f=t.useRef(null),o=t.useRef(0),n=t.useRef(null),a=t.useRef([]),l=t.useRef(),s=t.useRef(),F=t.useRef(i),m=t.useRef(!0);F.current=i;var g=typeof window<"u",p=!r&&r!==0&&g;if(typeof i!="function")throw new TypeError("Expected a function");r=+r||0;var E=!!(c=c||{}).leading,b=!("trailing"in c)||!!c.trailing,v="maxWait"in c,D="debounceOnServer"in c&&!!c.debounceOnServer,h=v?Math.max(+c.maxWait||0,r):null;t.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var T=t.useMemo(function(){var y=function(e){var u=a.current,w=l.current;return a.current=l.current=null,o.current=e,s.current=F.current.apply(w,u)},R=function(e,u){p&&cancelAnimationFrame(n.current),n.current=p?requestAnimationFrame(e):setTimeout(e,u)},M=function(e){if(!m.current)return!1;var u=e-f.current;return!f.current||u>=r||u<0||v&&e-o.current>=h},S=function(e){return n.current=null,b&&a.current?y(e):(a.current=l.current=null,s.current)},A=function e(){var u=Date.now();if(M(u))return S(u);if(m.current){var w=r-(u-f.current),q=v?Math.min(w,h-(u-o.current)):w;R(e,q)}},d=function(){if(g||D){var e=Date.now(),u=M(e);if(a.current=[].slice.call(arguments),l.current=x,f.current=e,u){if(!n.current&&m.current)return o.current=f.current,R(A,r),E?y(f.current):s.current;if(v)return R(A,r),y(f.current)}return n.current||R(A,r),s.current}};return d.cancel=function(){n.current&&(p?cancelAnimationFrame(n.current):clearTimeout(n.current)),o.current=0,a.current=f.current=l.current=n.current=null},d.isPending=function(){return!!n.current},d.flush=function(){return n.current?S(Date.now()):s.current},d},[E,v,r,h,b,p,g,D]);return T}function W(i,r){return i===r}function C(i,r,c){var x=c&&c.equalityFn||W,f=t.useRef(i),o=t.useState({})[1],n=O(t.useCallback(function(l){f.current=l,o({})},[o]),r,c),a=t.useRef(i);return x(a.current,i)||(n(i),a.current=i),[f.current,n]}export{C as a};
