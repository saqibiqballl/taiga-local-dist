import{r as d,az as f,au as Bn}from"./index.js";function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},R.apply(null,arguments)}function kn(e,t){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}function Ie(e){var t=d.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var r=Object.create(null);Object.keys(e).forEach(function(i){r[i]=function(){var a;return(a=t.fn[i]).call.apply(a,[t.fn].concat([].slice.call(arguments)))}}),t.curr=r}return t.curr}function Mn(e){return d.useReducer(function(t,r){return R({},t,typeof r=="function"?r(t):r)},e)}var Dn=d.createContext(void 0),An="cubic-bezier(0.25, 0.8, 0.25, 1)",Ge=20,ge=typeof window<"u"&&"ontouchstart"in window,Xn=function(e,t,r){return Math.max(Math.min(e,r),t)},En=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),Xn(e,1*(1-r),Math.max(6,t)*(1+r))},Nn=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?d.useEffect:d.useLayoutEffect;function Je(e,t,r){var i=d.useRef(t);i.current=t,d.useEffect(function(){function a(u){i.current(u)}return e&&window.addEventListener(e,a,r),function(){e&&window.removeEventListener(e,a)}},[e])}var zn=["container"];function jn(e){var t=e.container,r=t===void 0?document.body:t,i=kn(e,zn);return Bn.createPortal(f.createElement("div",R({},i)),r)}function qn(e){return f.createElement("svg",R({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Kn(e){return f.createElement("svg",R({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Un(e){return f.createElement("svg",R({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Gn(){return d.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function In(e){var t=e.touches[0],r=t.clientX,i=t.clientY;if(e.touches.length>=2){var a=e.touches[1],u=a.clientX,c=a.clientY;return[(r+u)/2,(i+c)/2,Math.sqrt(Math.pow(u-r,2)+Math.pow(c-i,2))]}return[r,i,0]}var Re=function(e,t,r,i){var a,u=r*t,c=(u-i)/2,l=e;return u<=i?(a=1,l=0):e>0&&c-e<=0?(a=2,l=c):e<0&&c+e<=0&&(a=3,l=-c),[a,l]};function _n(e,t,r,i,a,u,c,l,m,v){c===void 0&&(c=innerWidth/2),l===void 0&&(l=innerHeight/2),m===void 0&&(m=0),v===void 0&&(v=0);var h=Re(e,u,r,innerWidth)[0],w=Re(t,u,i,innerHeight),_=innerWidth/2,k=innerHeight/2;return{x:c-u/a*(c-(_+e))-_+(i/r>=3&&r*u===innerWidth?0:h?m/2:m),y:l-u/a*(l-(k+t))-k+(w[0]?v/2:v),lastCX:c,lastCY:l}}function Wn(e,t,r){var i=e%180!=0;return i?[r,t,i]:[t,r,i]}function Yn(e,t,r){var i=Wn(r,innerWidth,innerHeight),a=i[0],u=i[1],c=0,l=a,m=u,v=e/t*u,h=t/e*a;return e<a&&t<u?(l=e,m=t):e<a&&t>=u?l=v:e>=a&&t<u||e/t>a/u?m=h:t/e>=3&&!i[2]?c=((m=h)-u)/2:l=v,{width:l,height:m,x:0,y:c,pause:!0}}function bn(e,t){var r=t.leading,i=r!==void 0&&r,a=t.maxWait,u=t.wait,c=u===void 0?a||0:u,l=d.useRef(e);l.current=e;var m=d.useRef(0),v=d.useRef(),h=function(){return v.current&&clearTimeout(v.current)},w=d.useCallback(function(){var _=[].slice.call(arguments),k=Date.now();function V(){m.current=k,h(),l.current.apply(null,_)}var b=m.current,C=k-b;if(b===0&&(i&&V(),m.current=k),a!==void 0){if(C>a)return void V()}else C<c&&(m.current=k);h(),v.current=setTimeout(function(){V(),m.current=0},c)},[c,a,i]);return w.cancel=h,w}var Ln=function(e,t,r){return Ae(e,t,r,100,function(i){return i},function(){return Ae(t,e,r)})},Jn=function(e){return 1-Math.pow(1-e,4)};function Ae(e,t,r,i,a,u){i===void 0&&(i=400),a===void 0&&(a=Jn);var c=t-e;if(c!==0){var l=Date.now(),m=0,v=function(){var w=Math.min(1,(Date.now()-l)/i);r(e+a(w)*c)&&w<1?h():(cancelAnimationFrame(m),w>=1&&u&&u())};h()}function h(){m=requestAnimationFrame(v)}}var Qn={T:0,L:0,W:0,H:0,FIT:void 0},Fn=function(){var e=d.useRef(!1);return d.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Zn=["className"];function $n(e){var t=e.className,r=t===void 0?"":t,i=kn(e,Zn);return f.createElement("div",R({className:"PhotoView__Spinner "+r},i),f.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},f.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),f.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var et=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function nt(e){var t=e.src,r=e.loaded,i=e.broken,a=e.className,u=e.onPhotoLoad,c=e.loadingElement,l=e.brokenElement,m=kn(e,et),v=Fn();return t&&!i?f.createElement(f.Fragment,null,f.createElement("img",R({className:"PhotoView__Photo"+(a?" "+a:""),src:t,onLoad:function(h){var w=h.target;v.current&&u({loaded:!0,naturalWidth:w.naturalWidth,naturalHeight:w.naturalHeight})},onError:function(){v.current&&u({broken:!0})},draggable:!1,alt:""},m)),!r&&(c?f.createElement("span",{className:"PhotoView__icon"},c):f.createElement($n,{className:"PhotoView__icon"}))):l?f.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var tt={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function rt(e){var t=e.item,r=t.src,i=t.render,a=t.width,u=a===void 0?0:a,c=t.height,l=c===void 0?0:c,m=t.originRef,v=e.visible,h=e.speed,w=e.easing,_=e.wrapClassName,k=e.className,V=e.style,b=e.loadingElement,C=e.brokenElement,Y=e.onPhotoTap,j=e.onMaskTap,Qe=e.onReachMove,Le=e.onReachUp,Pn=e.onPhotoResize,H=e.isActive,pe=e.expose,ln=Mn(tt),p=ln[0],E=ln[1],He=d.useRef(0),De=Fn(),sn=p.naturalWidth,ie=sn===void 0?u:sn,N=p.naturalHeight,W=N===void 0?l:N,Ze=p.width,q=Ze===void 0?u:Ze,dn=p.height,we=dn===void 0?l:dn,$e=p.loaded,en=$e===void 0?!r:$e,_e=p.broken,D=p.x,oe=p.y,K=p.touched,Rn=p.stopRaf,xe=p.maskTouched,U=p.rotate,X=p.scale,fn=p.CX,Fe=p.CY,Ye=p.lastX,nn=p.lastY,y=p.lastCX,vn=p.lastCY,Z=p.lastScale,Xe=p.touchTime,hn=p.touchLength,G=p.pause,Ne=p.reach,tn=Ie({onScale:function(n){return ae(En(n))},onRotate:function(n){U!==n&&(pe({rotate:n}),E(R({rotate:n},Yn(ie,W,n))))}});function ae(n,o,g){X!==n&&(pe({scale:n}),E(R({scale:n},_n(D,oe,q,we,X,n,o,g),n<=1&&{x:0,y:0})))}var mn=bn(function(n,o,g){if(g===void 0&&(g=0),(K||xe)&&H){var ce=Wn(U,q,we),ue=ce[0],F=ce[1];if(g===0&&He.current===0){var I=Math.abs(n-fn)<=20,L=Math.abs(o-Fe)<=20;if(I&&L)return void E({lastCX:n,lastCY:o});He.current=I?o>Fe?3:2:1}var ne,We=n-y,Ee=o-vn;if(g===0){var Se=Re(We+Ye,X,ue,innerWidth)[0],ze=Re(Ee+nn,X,F,innerHeight);ne=function(be,se,de,te){return se&&be===1||te==="x"?"x":de&&be>1||te==="y"?"y":void 0}(He.current,Se,ze[0],Ne),ne!==void 0&&Qe(ne,n,o,X)}if(ne==="x"||xe)return void E({reach:"x"});var le=En(X+(g-hn)/100/2*X,ie/q,.2);pe({scale:le}),E(R({touchLength:g,reach:ne,scale:le},_n(D,oe,q,we,X,le,n,o,We,Ee)))}},{maxWait:8});function rn(n){return!Rn&&!K&&(De.current&&E(R({},n,{pause:v})),De.current)}var ye,$,Ce,on,gn,pn,wn,A,xn=(gn=function(n){return rn({x:n})},pn=function(n){return rn({y:n})},wn=function(n){return De.current&&(pe({scale:n}),E({scale:n})),!K&&De.current},A=Ie({X:function(n){return gn(n)},Y:function(n){return pn(n)},S:function(n){return wn(n)}}),function(n,o,g,ce,ue,F,I,L,ne,We,Ee){var Se=Wn(We,ue,F),ze=Se[0],le=Se[1],be=Re(n,L,ze,innerWidth),se=be[0],de=be[1],te=Re(o,L,le,innerHeight),je=te[0],Cn=te[1],qe=Date.now()-Ee;if(qe>=200||L!==I||Math.abs(ne-I)>1){var Me=_n(n,o,ue,F,I,L),fe=Me.x,Te=Me.y,O=se?de:fe!==n?fe:null,Ke=je?Cn:Te!==o?Te:null;return O!==null&&Ae(n,O,A.X),Ke!==null&&Ae(o,Ke,A.Y),void(L!==I&&Ae(I,L,A.S))}var Ve=(n-g)/qe,ke=(o-ce)/qe,Pe=Math.sqrt(Math.pow(Ve,2)+Math.pow(ke,2)),ve=!1,he=!1;(function(J,S){var T,Q=J,me=0,B=0,Ue=function(cn){T||(T=cn);var un=cn-T,Sn=Math.sign(J),Tn=-.001*Sn,Vn=Math.sign(-Q)*Math.pow(Q,2)*2e-4,On=Q*un+(Tn+Vn)*Math.pow(un,2)/2;me+=On,T=cn,Sn*(Q+=(Tn+Vn)*un)<=0?z():S(me)?re():z()};function re(){B=requestAnimationFrame(Ue)}function z(){cancelAnimationFrame(B)}re()})(Pe,function(J){var S=n+J*(Ve/Pe),T=o+J*(ke/Pe),Q=Re(S,I,ze,innerWidth),me=Q[0],B=Q[1],Ue=Re(T,I,le,innerHeight),re=Ue[0],z=Ue[1];if(me&&!ve&&(ve=!0,se?Ae(S,B,A.X):Ln(B,S+(S-B),A.X)),re&&!he&&(he=!0,je?Ae(T,z,A.Y):Ln(z,T+(T-z),A.Y)),ve&&he)return!1;var cn=ve||A.X(B),un=he||A.Y(z);return cn&&un})}),Oe=(ye=Y,$=function(n,o){Ne||ae(X!==1?1:Math.max(2,ie/q),n,o)},Ce=d.useRef(0),on=bn(function(){Ce.current=0,ye.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var n=[].slice.call(arguments);Ce.current+=1,on.apply(void 0,n),Ce.current>=2&&(on.cancel(),Ce.current=0,$.apply(void 0,n))});function Be(n,o){if(He.current=0,(K||xe)&&H){E({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var g=En(X,ie/q);if(xn(D,oe,Ye,nn,q,we,X,g,Z,U,Xe),Le(n,o),fn===n&&Fe===o){if(K)return void Oe(n,o);xe&&j(n,o)}}}function an(n,o,g){g===void 0&&(g=0),E({touched:!0,CX:n,CY:o,lastCX:n,lastCY:o,lastX:D,lastY:oe,lastScale:X,touchLength:g,touchTime:Date.now()})}function yn(n){E({maskTouched:!0,CX:n.clientX,CY:n.clientY,lastX:D,lastY:oe})}Je(ge?void 0:"mousemove",function(n){n.preventDefault(),mn(n.clientX,n.clientY)}),Je(ge?void 0:"mouseup",function(n){Be(n.clientX,n.clientY)}),Je(ge?"touchmove":void 0,function(n){n.preventDefault();var o=In(n);mn.apply(void 0,o)},{passive:!1}),Je(ge?"touchend":void 0,function(n){var o=n.changedTouches[0];Be(o.clientX,o.clientY)},{passive:!1}),Je("resize",bn(function(){en&&!K&&(E(Yn(ie,W,U)),Pn())},{maxWait:8})),Nn(function(){H&&pe(R({scale:X,rotate:U},tn))},[H]);var ee=function(n,o,g,ce,ue,F,I,L,ne,We){var Ee=function(fe,Te,O,Ke,Ve){var ke=d.useRef(!1),Pe=Mn({lead:!0,scale:O}),ve=Pe[0],he=ve.lead,J=ve.scale,S=Pe[1],T=bn(function(Q){try{return Ve(!0),S({lead:!1,scale:Q}),Promise.resolve()}catch(me){return Promise.reject(me)}},{wait:Ke});return Nn(function(){ke.current?(Ve(!1),S({lead:!0}),T(O)):ke.current=!0},[O]),he?[fe*J,Te*J,O/J]:[fe*O,Te*O,1]}(F,I,L,ne,We),Se=Ee[0],ze=Ee[1],le=Ee[2],be=function(fe,Te,O,Ke,Ve){var ke=d.useState(Qn),Pe=ke[0],ve=ke[1],he=d.useState(0),J=he[0],S=he[1],T=d.useRef(),Q=Ie({OK:function(){return fe&&S(4)}});function me(B){Ve(!1),S(B)}return d.useEffect(function(){if(T.current||(T.current=Date.now()),O){if(function(B,Ue){var re=B&&B.current;if(re&&re.nodeType===1){var z=re.getBoundingClientRect();Ue({T:z.top,L:z.left,W:z.width,H:z.height,FIT:re.tagName==="IMG"?getComputedStyle(re).objectFit:void 0})}}(Te,ve),fe)return Date.now()-T.current<250?(S(1),requestAnimationFrame(function(){S(2),requestAnimationFrame(function(){return me(3)})}),void setTimeout(Q.OK,Ke)):void S(4);me(5)}},[fe,O]),[J,Pe]}(n,o,g,ne,We),se=be[0],de=be[1],te=de.W,je=de.FIT,Cn=innerWidth/2,qe=innerHeight/2,Me=se<3||se>4;return[Me?te?de.L:Cn:ce+(Cn-F*L/2),Me?te?de.T:qe:ue+(qe-I*L/2),Se,Me&&je?Se*(de.H/te):ze,se===0?le:Me?te/(F*L)||.01:le,Me?je?1:0:1,se,je]}(v,m,en,D,oe,q,we,X,h,function(n){return E({pause:n})}),s=ee[4],x=ee[6],P="transform "+h+"ms "+w,M={className:k,onMouseDown:ge?void 0:function(n){n.stopPropagation(),n.button===0&&an(n.clientX,n.clientY,0)},onTouchStart:ge?function(n){n.stopPropagation(),an.apply(void 0,In(n))}:void 0,onWheel:function(n){if(!Ne){var o=En(X-n.deltaY/100/2,ie/q);E({stopRaf:!0}),ae(o,n.clientX,n.clientY)}},style:{width:ee[2]+"px",height:ee[3]+"px",opacity:ee[5],objectFit:x===4?void 0:ee[7],transform:U?"rotate("+U+"deg)":void 0,transition:x>2?P+", opacity "+h+"ms ease, height "+(x<4?h/2:x>4?h:0)+"ms "+w:void 0}};return f.createElement("div",{className:"PhotoView__PhotoWrap"+(_?" "+_:""),style:V,onMouseDown:!ge&&H?yn:void 0,onTouchStart:ge&&H?function(n){return yn(n.touches[0])}:void 0},f.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+s+", 0, 0, "+s+", "+ee[0]+", "+ee[1]+")",transition:K||G?void 0:P,willChange:H?"transform":void 0}},r?f.createElement(nt,R({src:r,loaded:en,broken:_e},M,{onPhotoLoad:function(n){E(R({},n,n.loaded&&Yn(n.naturalWidth||0,n.naturalHeight||0,U)))},loadingElement:b,brokenElement:C})):i&&i({attrs:M,scale:s,rotate:U})))}var Hn={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function it(e){var t=e.loop,r=t===void 0?3:t,i=e.speed,a=e.easing,u=e.photoClosable,c=e.maskClosable,l=c===void 0||c,m=e.maskOpacity,v=m===void 0?1:m,h=e.pullClosable,w=h===void 0||h,_=e.bannerVisible,k=_===void 0||_,V=e.overlayRender,b=e.toolbarRender,C=e.className,Y=e.maskClassName,j=e.photoClassName,Qe=e.photoWrapClassName,Le=e.loadingElement,Pn=e.brokenElement,H=e.images,pe=e.index,ln=pe===void 0?0:pe,p=e.onIndexChange,E=e.visible,He=e.onClose,De=e.afterClose,sn=e.portalContainer,ie=Mn(Hn),N=ie[0],W=ie[1],Ze=d.useState(0),q=Ze[0],dn=Ze[1],we=N.x,$e=N.touched,en=N.pause,_e=N.lastCX,D=N.lastCY,oe=N.bg,K=oe===void 0?v:oe,Rn=N.lastBg,xe=N.overlay,U=N.minimal,X=N.scale,fn=N.rotate,Fe=N.onScale,Ye=N.onRotate,nn=e.hasOwnProperty("index"),y=nn?ln:q,vn=nn?p:dn,Z=d.useRef(y),Xe=H.length,hn=H[y],G=typeof r=="boolean"?r:Xe>r,Ne=function(s,x){var P=d.useReducer(function(g){return!g},!1)[1],M=d.useRef(0),n=function(g){var ce=d.useRef(g);function ue(F){ce.current=F}return d.useMemo(function(){(function(F){s?(F(s),M.current=1):M.current=2})(ue)},[g]),[ce.current,ue]}(s),o=n[1];return[n[0],M.current,function(){P(),M.current===2&&(o(!1),x&&x()),M.current=0}]}(E,De),tn=Ne[0],ae=Ne[1],mn=Ne[2];Nn(function(){if(tn)return W({pause:!0,x:y*-(innerWidth+Ge)}),void(Z.current=y);W(Hn)},[tn]);var rn=Ie({close:function(s){Ye&&Ye(0),W({overlay:!0,lastBg:K}),He(s)},changeIndex:function(s,x){x===void 0&&(x=!1);var P=G?Z.current+(s-y):s,M=Xe-1,n=Xn(P,0,M),o=G?P:n,g=innerWidth+Ge;W({touched:!1,lastCX:void 0,lastCY:void 0,x:-g*o,pause:x}),Z.current=o,vn&&vn(G?s<0?M:s>M?0:s:n)}}),ye=rn.close,$=rn.changeIndex;function Ce(s){return s?ye():W({overlay:!xe})}function on(){W({x:-(innerWidth+Ge)*y,lastCX:void 0,lastCY:void 0,pause:!0}),Z.current=y}function gn(s,x,P,M){s==="x"?function(n){if(_e!==void 0){var o=n-_e,g=o;!G&&(y===0&&o>0||y===Xe-1&&o<0)&&(g=o/2),W({touched:!0,lastCX:_e,x:-(innerWidth+Ge)*Z.current+g,pause:!1})}else W({touched:!0,lastCX:n,x:we,pause:!1})}(x):s==="y"&&function(n,o){if(D!==void 0){var g=v===null?null:Xn(v,.01,v-Math.abs(n-D)/100/4);W({touched:!0,lastCY:D,bg:o===1?g:v,minimal:o===1})}else W({touched:!0,lastCY:n,bg:K,minimal:!0})}(P,M)}function pn(s,x){var P=s-(_e??s),M=x-(D??x),n=!1;if(P<-40)$(y+1);else if(P>40)$(y-1);else{var o=-(innerWidth+Ge)*Z.current;Math.abs(M)>100&&U&&w&&(n=!0,ye()),W({touched:!1,x:o,lastCX:void 0,lastCY:void 0,bg:v,overlay:!!n||xe})}}Je("keydown",function(s){if(E)switch(s.key){case"ArrowLeft":$(y-1,!0);break;case"ArrowRight":$(y+1,!0);break;case"Escape":ye()}});var wn=function(s,x,P){return d.useMemo(function(){var M=s.length;return P?s.concat(s).concat(s).slice(M+x-1,M+x+2):s.slice(Math.max(x-1,0),Math.min(x+2,M+1))},[s,x,P])}(H,y,G);if(!tn)return null;var A=xe&&!ae,xn=E?K:Rn,Oe=Fe&&Ye&&{images:H,index:y,visible:E,onClose:ye,onIndexChange:$,overlayVisible:A,overlay:hn&&hn.overlay,scale:X,rotate:fn,onScale:Fe,onRotate:Ye},Be=i?i(ae):400,an=a?a(ae):An,yn=i?i(3):600,ee=a?a(3):An;return f.createElement(jn,{className:"PhotoView-Portal"+(A?"":" PhotoView-Slider__clean")+(E?"":" PhotoView-Slider__willClose")+(C?" "+C:""),role:"dialog",onClick:function(s){return s.stopPropagation()},container:sn},E&&f.createElement(Gn,null),f.createElement("div",{className:"PhotoView-Slider__Backdrop"+(Y?" "+Y:"")+(ae===1?" PhotoView-Slider__fadeIn":ae===2?" PhotoView-Slider__fadeOut":""),style:{background:xn?"rgba(0, 0, 0, "+xn+")":void 0,transitionTimingFunction:an,transitionDuration:($e?0:Be)+"ms",animationDuration:Be+"ms"},onAnimationEnd:mn}),k&&f.createElement("div",{className:"PhotoView-Slider__BannerWrap"},f.createElement("div",{className:"PhotoView-Slider__Counter"},y+1," / ",Xe),f.createElement("div",{className:"PhotoView-Slider__BannerRight"},b&&Oe&&b(Oe),f.createElement(qn,{className:"PhotoView-Slider__toolbarIcon",onClick:ye}))),wn.map(function(s,x){var P=G||y!==0?Z.current-1+x:y+x;return f.createElement(rt,{key:G?s.key+"/"+s.src+"/"+P:s.key,item:s,speed:Be,easing:an,visible:E,onReachMove:gn,onReachUp:pn,onPhotoTap:function(){return Ce(u)},onMaskTap:function(){return Ce(l)},wrapClassName:Qe,className:j,style:{left:(innerWidth+Ge)*P+"px",transform:"translate3d("+we+"px, 0px, 0)",transition:$e||en?void 0:"transform "+yn+"ms "+ee},loadingElement:Le,brokenElement:Pn,onPhotoResize:on,isActive:Z.current===P,expose:W})}),!ge&&k&&f.createElement(f.Fragment,null,(G||y!==0)&&f.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return $(y-1,!0)}},f.createElement(Kn,null)),(G||y+1<Xe)&&f.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return $(y+1,!0)}},f.createElement(Un,null))),V&&Oe&&f.createElement("div",{className:"PhotoView-Slider__Overlay"},V(Oe)))}var ot=["children","onIndexChange","onVisibleChange"],at={images:[],visible:!1,index:0};function ut(e){var t=e.children,r=e.onIndexChange,i=e.onVisibleChange,a=kn(e,ot),u=Mn(at),c=u[0],l=u[1],m=d.useRef(0),v=c.images,h=c.visible,w=c.index,_=Ie({nextId:function(){return m.current+=1},update:function(b){var C=v.findIndex(function(j){return j.key===b.key});if(C>-1){var Y=v.slice();return Y.splice(C,1,b),void l({images:Y})}l(function(j){return{images:j.images.concat(b)}})},remove:function(b){l(function(C){var Y=C.images.filter(function(j){return j.key!==b});return{images:Y,index:Math.min(Y.length-1,w)}})},show:function(b){var C=v.findIndex(function(Y){return Y.key===b});l({visible:!0,index:C}),i&&i(!0,C,c)}}),k=Ie({close:function(){l({visible:!1}),i&&i(!1,w,c)},changeIndex:function(b){l({index:b}),r&&r(b,c)}}),V=d.useMemo(function(){return R({},c,_)},[c,_]);return f.createElement(Dn.Provider,{value:V},t,f.createElement(it,R({images:v,visible:h,index:w,onIndexChange:k.changeIndex,onClose:k.close},a)))}var lt=function(e){var t,r,i=e.src,a=e.render,u=e.overlay,c=e.width,l=e.height,m=e.triggers,v=m===void 0?["onClick"]:m,h=e.children,w=d.useContext(Dn),_=(t=function(){return w.nextId()},(r=d.useRef({sign:!1,fn:void 0}).current).sign||(r.sign=!0,r.fn=t()),r.fn),k=d.useRef(null);d.useImperativeHandle(h==null?void 0:h.ref,function(){return k.current}),d.useEffect(function(){return function(){w.remove(_)}},[]);var V=Ie({render:function(C){return a&&a(C)},show:function(C,Y){w.show(_),function(j,Qe){if(h){var Le=h.props[j];Le&&Le(Qe)}}(C,Y)}}),b=d.useMemo(function(){var C={};return v.forEach(function(Y){C[Y]=V.show.bind(null,Y)}),C},[]);return d.useEffect(function(){w.update({key:_,src:i,originRef:k,render:V.render,overlay:u,width:c,height:l})},[i]),h?d.Children.only(d.cloneElement(h,R({},b,{ref:k}))):null};export{ut as $,lt as e};
