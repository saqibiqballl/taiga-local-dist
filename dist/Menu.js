import{r as s,g as te,f as oe,s as K,_ as M,l as ne,m as j,j as O,o as X,p as se,ac as De,ab as ye,aj as Ie,n as ke}from"./index.js";import{g as Fe,M as Oe}from"./Modal.js";import{M as $e}from"./Paper.js";import{a as Y,o as me,i as Ne}from"./resolveComponentProps.js";import{d as _e}from"./createSvgIcon2.js";import{u as q}from"./useSlotProps.js";import{G as je}from"./Grow.js";const ze=s.createContext({}),He=ze;function Ke(t){return te("MuiList",t)}oe("MuiList",["root","padding","dense","subheader"]);const Ae=["children","className","component","dense","disablePadding","subheader"],We=t=>{const{classes:e,disablePadding:o,dense:P,subheader:h}=t;return se({root:["root",!o&&"padding",P&&"dense",h&&"subheader"]},Ke,e)},Ue=K("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,!o.disablePadding&&e.padding,o.dense&&e.dense,o.subheader&&e.subheader]}})(({ownerState:t})=>M({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),Ge=s.forwardRef(function(e,o){const P=ne({props:e,name:"MuiList"}),{children:h,className:y,component:d="ul",dense:u=!1,disablePadding:l=!1,subheader:m}=P,S=j(P,Ae),x=s.useMemo(()=>({dense:u}),[u]),E=M({},P,{component:d,dense:u,disablePadding:l}),v=We(E);return O.jsx(He.Provider,{value:x,children:O.jsxs(Ue,M({as:d,className:X(v.root,y),ref:o,ownerState:E},S,{children:[m,h]}))})}),Ve=Ge,Be=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Z(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function ge(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function xe(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.indexOf(e.keys.join(""))===0}function U(t,e,o,P,h,y){let d=!1,u=h(t,e,e?o:!1);for(;u;){if(u===t.firstChild){if(d)return!1;d=!0}const l=P?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!xe(u,y)||l)u=h(t,u,o);else return u.focus(),!0}return!1}const Xe=s.forwardRef(function(e,o){const{actions:P,autoFocus:h=!1,autoFocusItem:y=!1,children:d,className:u,disabledItemsFocusable:l=!1,disableListWrap:m=!1,onKeyDown:S,variant:x="selectedMenu"}=e,E=j(e,Be),v=s.useRef(null),A=s.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});De(()=>{h&&v.current.focus()},[h]),s.useImperativeHandle(P,()=>({adjustStyleForScrollbar:(n,{direction:a})=>{const p=!v.current.style.width;if(n.clientHeight<v.current.clientHeight&&p){const g=`${Fe(Y(n))}px`;v.current.style[a==="rtl"?"paddingLeft":"paddingRight"]=g,v.current.style.width=`calc(100% + ${g})`}return v.current}}),[]);const $=n=>{const a=v.current,p=n.key,g=Y(a).activeElement;if(p==="ArrowDown")n.preventDefault(),U(a,g,m,l,Z);else if(p==="ArrowUp")n.preventDefault(),U(a,g,m,l,ge);else if(p==="Home")n.preventDefault(),U(a,null,m,l,Z);else if(p==="End")n.preventDefault(),U(a,null,m,l,ge);else if(p.length===1){const i=A.current,L=p.toLowerCase(),I=performance.now();i.keys.length>0&&(I-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&L!==i.keys[0]&&(i.repeating=!1)),i.lastTime=I,i.keys.push(L);const k=g&&!i.repeating&&xe(g,i);i.previousKeyMatched&&(k||U(a,g,!1,l,Z,i))?n.preventDefault():i.previousKeyMatched=!1}S&&S(n)},f=ye(v,o);let r=-1;s.Children.forEach(d,(n,a)=>{if(!s.isValidElement(n)){r===a&&(r+=1,r>=d.length&&(r=-1));return}n.props.disabled||(x==="selectedMenu"&&n.props.selected||r===-1)&&(r=a),r===a&&(n.props.disabled||n.props.muiSkipListHighlight||n.type.muiSkipListHighlight)&&(r+=1,r>=d.length&&(r=-1))});const N=s.Children.map(d,(n,a)=>{if(a===r){const p={};return y&&(p.autoFocus=!0),n.props.tabIndex===void 0&&x==="selectedMenu"&&(p.tabIndex=0),s.cloneElement(n,p)}return n});return O.jsx(Ve,M({role:"menu",ref:f,className:u,onKeyDown:$,tabIndex:h?0:-1},E,{children:N}))}),Ye=Xe;function qe(t){return te("MuiPopover",t)}oe("MuiPopover",["root","paper"]);const Je=["onEntering"],Qe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Ze=["slotProps"];function Pe(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.height/2:e==="bottom"&&(o=t.height),o}function ve(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.width/2:e==="right"&&(o=t.width),o}function be(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function ee(t){return typeof t=="function"?t():t}const et=t=>{const{classes:e}=t;return se({root:["root"],paper:["paper"]},qe,e)},tt=K(Oe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Me=K($e,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),ot=s.forwardRef(function(e,o){var P,h,y;const d=ne({props:e,name:"MuiPopover"}),{action:u,anchorEl:l,anchorOrigin:m={vertical:"top",horizontal:"left"},anchorPosition:S,anchorReference:x="anchorEl",children:E,className:v,container:A,elevation:$=8,marginThreshold:f=16,open:r,PaperProps:N={},slots:n,slotProps:a,transformOrigin:p={vertical:"top",horizontal:"left"},TransitionComponent:g=je,transitionDuration:i="auto",TransitionProps:{onEntering:L}={},disableScrollLock:I=!1}=d,k=j(d.TransitionProps,Je),J=j(d,Qe),T=(P=a==null?void 0:a.paper)!=null?P:N,F=s.useRef(),G=ye(F,T.ref),W=M({},d,{anchorOrigin:m,anchorReference:x,elevation:$,marginThreshold:f,externalPaperSlotProps:T,transformOrigin:p,TransitionComponent:g,transitionDuration:i,TransitionProps:k}),V=et(W),B=s.useCallback(()=>{if(x==="anchorPosition")return S;const c=ee(l),R=(c&&c.nodeType===1?c:Y(F.current).body).getBoundingClientRect();return{top:R.top+Pe(R,m.vertical),left:R.left+ve(R,m.horizontal)}},[l,m.horizontal,m.vertical,S,x]),w=s.useCallback(c=>({vertical:Pe(c,p.vertical),horizontal:ve(c,p.horizontal)}),[p.horizontal,p.vertical]),_=s.useCallback(c=>{const b={width:c.offsetWidth,height:c.offsetHeight},R=w(b);if(x==="none")return{top:null,left:null,transformOrigin:be(R)};const ce=B();let z=ce.top-R.vertical,H=ce.left-R.horizontal;const ue=z+b.height,pe=H+b.width,de=me(ee(l)),fe=de.innerHeight-f,he=de.innerWidth-f;if(f!==null&&z<f){const C=z-f;z-=C,R.vertical+=C}else if(f!==null&&ue>fe){const C=ue-fe;z-=C,R.vertical+=C}if(f!==null&&H<f){const C=H-f;H-=C,R.horizontal+=C}else if(pe>he){const C=pe-he;H-=C,R.horizontal+=C}return{top:`${Math.round(z)}px`,left:`${Math.round(H)}px`,transformOrigin:be(R)}},[l,x,B,w,f]),[we,re]=s.useState(r),D=s.useCallback(()=>{const c=F.current;if(!c)return;const b=_(c);b.top!==null&&(c.style.top=b.top),b.left!==null&&(c.style.left=b.left),c.style.transformOrigin=b.transformOrigin,re(!0)},[_]);s.useEffect(()=>(I&&window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)),[l,I,D]);const Re=(c,b)=>{L&&L(c,b),D()},Se=()=>{re(!1)};s.useEffect(()=>{r&&D()}),s.useImperativeHandle(u,()=>r?{updatePosition:()=>{D()}}:null,[r,D]),s.useEffect(()=>{if(!r)return;const c=_e(()=>{D()}),b=me(l);return b.addEventListener("resize",c),()=>{c.clear(),b.removeEventListener("resize",c)}},[l,r,D]);let ie=i;i==="auto"&&!g.muiSupportAuto&&(ie=void 0);const Ce=A||(l?Y(ee(l)).body:void 0),Q=(h=n==null?void 0:n.root)!=null?h:tt,ae=(y=n==null?void 0:n.paper)!=null?y:Me,Ee=q({elementType:ae,externalSlotProps:M({},T,{style:we?T.style:M({},T.style,{opacity:0})}),additionalProps:{elevation:$,ref:G},ownerState:W,className:X(V.paper,T==null?void 0:T.className)}),le=q({elementType:Q,externalSlotProps:(a==null?void 0:a.root)||{},externalForwardedProps:J,additionalProps:{ref:o,slotProps:{backdrop:{invisible:!0}},container:Ce,open:r},ownerState:W,className:X(V.root,v)}),{slotProps:Le}=le,Te=j(le,Ze);return O.jsx(Q,M({},Te,!Ne(Q)&&{slotProps:Le,disableScrollLock:I},{children:O.jsx(g,M({appear:!0,in:r,onEntering:Re,onExited:Se,timeout:ie},k,{children:O.jsx(ae,M({},Ee,{children:E}))}))}))}),nt=ot;function st(t){return te("MuiMenu",t)}oe("MuiMenu",["root","paper","list"]);const rt=["onEntering"],it=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],at={vertical:"top",horizontal:"right"},lt={vertical:"top",horizontal:"left"},ct=t=>{const{classes:e}=t;return se({root:["root"],paper:["paper"],list:["list"]},st,e)},ut=K(nt,{shouldForwardProp:t=>Ie(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),pt=K(Me,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),dt=K(Ye,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),ft=s.forwardRef(function(e,o){var P,h;const y=ne({props:e,name:"MuiMenu"}),{autoFocus:d=!0,children:u,className:l,disableAutoFocusItem:m=!1,MenuListProps:S={},onClose:x,open:E,PaperProps:v={},PopoverClasses:A,transitionDuration:$="auto",TransitionProps:{onEntering:f}={},variant:r="selectedMenu",slots:N={},slotProps:n={}}=y,a=j(y.TransitionProps,rt),p=j(y,it),g=ke(),i=M({},y,{autoFocus:d,disableAutoFocusItem:m,MenuListProps:S,onEntering:f,PaperProps:v,transitionDuration:$,TransitionProps:a,variant:r}),L=ct(i),I=d&&!m&&E,k=s.useRef(null),J=(w,_)=>{k.current&&k.current.adjustStyleForScrollbar(w,{direction:g?"rtl":"ltr"}),f&&f(w,_)},T=w=>{w.key==="Tab"&&(w.preventDefault(),x&&x(w,"tabKeyDown"))};let F=-1;s.Children.map(u,(w,_)=>{s.isValidElement(w)&&(w.props.disabled||(r==="selectedMenu"&&w.props.selected||F===-1)&&(F=_))});const G=(P=N.paper)!=null?P:pt,W=(h=n.paper)!=null?h:v,V=q({elementType:N.root,externalSlotProps:n.root,ownerState:i,className:[L.root,l]}),B=q({elementType:G,externalSlotProps:W,ownerState:i,className:L.paper});return O.jsx(ut,M({onClose:x,anchorOrigin:{vertical:"bottom",horizontal:g?"right":"left"},transformOrigin:g?at:lt,slots:{paper:G,root:N.root},slotProps:{root:V,paper:B},open:E,ref:o,transitionDuration:$,TransitionProps:M({onEntering:J},a),ownerState:i},p,{classes:A,children:O.jsx(dt,M({onKeyDown:T,actions:k,autoFocus:d&&(F===-1||m),autoFocusItem:I,variant:r},S,{className:X(L.list,S.className),children:u}))}))}),xt=ft;export{He as L,xt as M,Ye as a};
