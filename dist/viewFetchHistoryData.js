import{r as t,Z as K,u as L,K as O,j as e,d as A}from"./index.js";import{S as T}from"./secureFetch.js";import{t as V}from"./toastr.js";import{C as f}from"./CustomGraph.js";import"./index3.js";const C=()=>{const[y,b]=t.useState(!1),[w,j]=t.useState([]),[v,k]=t.useState([]),[H,S]=t.useState(!1),[_,F]=t.useState([]),[g,G]=t.useState([]),{id:c}=K(),l=L(),u=l==null?void 0:l.userPermissions,N="module_socialRadar",R="submodule_socialRadar_fetchHistory_view",d=t.useMemo(()=>O(u,N,R),[u]),[E,I]=t.useState(!1);return t.useEffect(()=>{requestAnimationFrame(()=>{document.querySelectorAll("[data-name]").forEach(o=>{const a=o.getAttribute("data-name"),i=d.find(n=>n.id===a);i&&(i.enable||o.remove())})})},[d,E]),t.useEffect(()=>{(async()=>{c&&await T.post(`${A}/api/fetchhistory/getsinglefetchhistory`,{id:c}).then(s=>{var m,h,p,x;const o=(m=s==null?void 0:s.selectData[0])==null?void 0:m.keywordcounts.map(r=>Object.keys(r)[0]),a=(h=s==null?void 0:s.selectData[0])==null?void 0:h.keywordcounts.map(r=>r[Object.keys(r)[0]]);j(o),k(a),b(!0);const i=(p=s==null?void 0:s.selectData[0])==null?void 0:p.topiccounts.map(r=>Object.keys(r)[0]),n=(x=s==null?void 0:s.selectData[0])==null?void 0:x.topiccounts.map(r=>r[Object.keys(r)[0]]);F(i),G(n),S(!0)}).catch(s=>{V.error("Error Occured")})})()},[c]),e.jsxs("div",{className:"grow",children:[e.jsxs("div",{children:[e.jsx("div",{"data-name":"submodule_socialRadar_fetchHistory_view_keywordsGraph",children:y?e.jsx(f,{title:"Keywords Graph",labels:w,hits:v}):null}),e.jsx("br",{}),e.jsx("div",{"data-name":"submodule_socialRadar_fetchHistory_view_topicsGraph",children:H?e.jsx(f,{title:"Topics Graph",labels:_,hits:g}):null})]}),e.jsx("br",{})]})};function U(){return e.jsx("div",{className:"flex h-[100dvh] overflow-hidden",children:e.jsx("div",{className:"relative flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-9xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl md:text-3xl text-slate-700 dark:text-slate-100 font-bold",children:"Social Buzz Fetch History âœ¨"})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl mb-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:-mr-px",children:e.jsx(C,{})})})]})})})}export{U as default};
